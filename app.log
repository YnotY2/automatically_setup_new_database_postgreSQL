2024-02-22 23:46:18,434 - INFO - HIIIIIIIIIIIIIIIIIIIIIII
2024-02-22 23:46:18,434 - INFO - [96mStarting[0m[93m main.py[0m [96m python3 script ...[0m
2024-02-22 23:46:18,434 - INFO - [96mCalling[0m[93m start_posgresql.py[0m [96mservice -function[0m
2024-02-22 23:46:18,434 - INFO - [96mExecuting start_postgresql.sh script[0m
2024-02-22 23:46:18,444 - INFO - [92mPostgreSQL service started successfully.[0m
2024-02-22 23:46:18,444 - INFO - [96mCalling[0m[93m create_new_postgresql_user.py[0m [96mservice -function[0m
2024-02-22 23:46:18,444 - INFO - [94mAttempting to create a new database user with corresponding password:[0m
2024-02-22 23:46:18,444 - INFO - [96mUser:            [95mproject_google_reviews_usr[0m
2024-02-22 23:46:18,444 - INFO - [96mPassword:        [95mOo51knSSV3OSwfuy8WFu[0m
2024-02-22 23:46:20,529 - ERROR - [91mError occurred: Command 'sudo -u postgres psql -c "CREATE USER project_google_reviews_usr WITH PASSWORD 'Oo51knSSV3OSwfuy8WFu';"' returned non-zero exit status 1.[0m
2024-02-22 23:46:20,529 - INFO - [94mAttempting to confirm creation of a new database user:[0m
2024-02-22 23:46:20,529 - INFO - [96mUser:            [95mproject_google_reviews_usr[0m
2024-02-22 23:46:22,133 - ERROR - [91mError occurred: Command 'psql -U project_google_reviews_usr -W' returned non-zero exit status 2.[0m
2024-02-22 23:46:22,134 - INFO - [92mThe error should indicate: 'peer auth failed' because we haven't yet added an entry to the 'pg_hba.conf' file for the user database and the md5 authentication method.[0m
2024-02-22 23:46:22,134 - INFO - [96mCalling[0m[93m create_database_and_confirm_creation.py[0m [96mservice -function[0m
2024-02-22 23:46:22,141 - INFO - [96mAttempting to connect to the following database:[0m
2024-02-22 23:46:22,141 - INFO - [94mdatabase:[0m[95m        'postgres'       [0m
2024-02-22 23:46:22,141 - INFO - [94muser:[0m[95m            'postgres'         [0m
2024-02-22 23:46:22,141 - INFO - [94mpassword:[0m[95m        'postgres'         [0m
2024-02-22 23:46:22,141 - INFO - [94mhost:[0m[95m            'localhost'         [0m
2024-02-22 23:46:22,141 - INFO - [94mport:[0m[95m            '5432'        [0m
2024-02-22 23:46:22,141 - INFO - [92mSuccessfully connected to the database.[0m
2024-02-22 23:46:22,141 - INFO - [96mAttempting to create database:[0m
2024-02-22 23:46:22,142 - INFO - [92mDatabase:[0m[95m      'project_google_reviews'[0m
2024-02-22 23:46:22,142 - ERROR - [91mAn error occurred: database "project_google_reviews" already exists
[0m
2024-02-22 23:46:22,142 - INFO - [96mAttempting to confirm creation of database:[0m
2024-02-22 23:46:22,142 - INFO - [92mDatabase:[0m[95m      'project_google_reviews'[0m
2024-02-22 23:46:22,142 - INFO - [92mDatabase:[95m     'project_google_reviews'[0m [92m created successfully.[0m
2024-02-22 23:46:22,142 - INFO - [96mCalling[0m[93m stop_postgresql.py[0m [96mservice -function[0m
2024-02-22 23:46:22,143 - INFO - [96mExecuting stop_postgresql.sh script[0m
2024-02-22 23:46:22,193 - INFO - [92mPostgreSQL service stopped successfully.[0m
2024-02-22 23:46:22,193 - INFO - [96mCalling[0m[93m check_status_postgresql_service.py[0m [96mservice -function[0m
2024-02-22 23:46:22,193 - INFO - [96mExecuting check_status_postgresql_service.sh script[0m
2024-02-22 23:46:22,209 - INFO - [92mStatus check on postgreSQL service completed successfully.[0m
2024-02-22 23:46:22,209 - INFO - [96mCalling[0m[93m edit_pg_hba_postgresql_config_file.py.py[0m [96mservice -function[0m
2024-02-22 23:46:22,209 - INFO - [94mAttempting to add new entry within 'pg_hba.conf' postgreSQL authentication file:[0m
2024-02-22 23:46:22,209 - INFO - [96mDatabase:            [95mproject_google_reviews[0m
2024-02-22 23:46:22,209 - INFO - [96mUser:                [95mproject_google_reviews_usr[0m
2024-02-22 23:46:22,209 - INFO - [94mAttempting to add following line:[0m
2024-02-22 23:46:22,209 - INFO - [96mDatabase:            [95mproject_google_reviews[0m
2024-02-22 23:46:22,209 - INFO - [95m# TYPE  DATABASE  USER     ADDRESS     METHOD[0m
2024-02-22 23:46:22,209 - INFO - [95mlocal   project_google_reviews   project_google_reviews_usr   tmd5[0m
2024-02-22 23:46:22,209 - INFO - [92mLine added successfully to pg_hba.conf.[0m
2024-02-22 23:46:22,209 - INFO - [96mCalling[0m[93m restart_postgresql.py[0m [96mservice -function[0m
2024-02-22 23:46:22,209 - INFO - [96mExecuting restart_postgresql.sh script[0m
2024-02-22 23:46:28,604 - INFO - [92mPostgreSQL service restarted successfully.[0m
2024-02-22 23:46:28,604 - INFO - [96mCalling[0m[93m check_status_postgresql_service.py[0m [96mservice -function[0m
2024-02-22 23:46:28,604 - INFO - [96mExecuting check_status_postgresql_service.sh script[0m
2024-02-22 23:46:28,619 - INFO - [92mStatus check on postgreSQL service completed successfully.[0m
2024-02-22 23:46:28,619 - INFO - [96mCalling[0m[93m create_schema_new_database.py[0m [96mservice -function[0m
2024-02-22 23:46:28,619 - INFO - [94mAttempting to create specified schema for database:[0m
2024-02-22 23:46:28,619 - INFO - [96mDatabase:            [95mproject_google_reviews[0m
2024-02-22 23:46:28,708 - INFO - [94mOutput of creating schema for database [0m [95mproject_google_reviews:[0m
2024-02-22 23:46:28,708 - INFO - -- Create the project_google_horeca_reviews database
CREATE DATABASE project_google_reviews;
-- Connect to the project_google_horeca_reviews database
\c project_google_reviews;
You are now connected to database "project_google_reviews" as user "postgres".
-- Create the horca_parameters_client schema
CREATE SCHEMA IF NOT EXISTS horca_parameters_client;
CREATE SCHEMA
-- Create the horca_parameters_client.client_data table
CREATE TABLE IF NOT EXISTS horca_parameters_client.client_data (
    client_id SERIAL PRIMARY KEY,
    client_name TEXT NOT NULL,
    client_data JSONB NOT NULL,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);
CREATE TABLE
-- Create the google_account_info schema
CREATE SCHEMA IF NOT EXISTS google_account_info;
CREATE SCHEMA
-- Create the google_account_info.account_data table
CREATE TABLE IF NOT EXISTS google_account_info.account_data (
    account_id SERIAL PRIMARY KEY,
    account_data JSONB NOT NULL,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);
CREATE TABLE
-- Create the standard_strings_review schema
CREATE SCHEMA IF NOT EXISTS standard_strings_review;
CREATE SCHEMA
-- Create the standard_strings_review.standard_string table
CREATE TABLE IF NOT EXISTS standard_strings_review.standard_string (
    string_id SERIAL PRIMARY KEY,
    string_data JSONB NOT NULL,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);
CREATE TABLE
-- Create the created_horeca_reviews schema
CREATE SCHEMA IF NOT EXISTS created_horeca_reviews;
CREATE SCHEMA
-- Create the created_horeca_reviews.reviews_data table
CREATE TABLE IF NOT EXISTS created_horeca_reviews.reviews_data (
    review_id SERIAL PRIMARY KEY,
    client_name TEXT NOT NULL,
    review_data JSONB NOT NULL,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    review_count INTEGER
);
CREATE TABLE
GRANT ALL PRIVILEGES ON ALL TABLES IN SCHEMA horca_parameters_client TO project_google_reviews_usr;
GRANT
GRANT ALL PRIVILEGES ON ALL TABLES IN SCHEMA google_account_info TO project_google_reviews_usr;
GRANT
GRANT ALL PRIVILEGES ON ALL TABLES IN SCHEMA standard_strings_review TO project_google_reviews_usr;
GRANT
GRANT ALL PRIVILEGES ON ALL TABLES IN SCHEMA created_horeca_reviews TO project_google_reviews_usr;
GRANT

2024-02-22 23:46:28,708 - INFO - [92mSchema for database: [0m[95mproject_google_reviews[0m[92m created successfully.[0m
2024-02-22 23:46:28,708 - INFO - [94mVerifying schema creation...[0m
2024-02-22 23:46:28,743 - INFO - [92mSchema:      [0m[95mhorca_parameters_client[0m[92m verified to be created successfully.[0m
2024-02-22 23:46:28,777 - INFO - [92mSchema:      [0m[95mgoogle_account_info[0m[92m verified to be created successfully.[0m
2024-02-22 23:46:28,815 - INFO - [92mSchema:      [0m[95mstandard_strings_review[0m[92m verified to be created successfully.[0m
2024-02-22 23:46:28,852 - INFO - [92mSchema:      [0m[95mcreated_horeca_reviews[0m[92m verified to be created successfully.[0m
2024-02-22 23:46:28,853 - INFO - [92mAll schemas created successfully! Logging layout of created schemas...[0m
2024-02-22 23:46:28,853 - ERROR - db_layout_visual.txt not found.
2024-02-22 23:49:55,978 - INFO - HIIIIIIIIIIIIIIIIIIIIIII
2024-02-22 23:49:55,978 - INFO - [96mStarting[0m[93m main.py[0m [96m python3 script ...[0m
2024-02-22 23:49:55,978 - INFO - [96mCalling[0m[93m start_posgresql.py[0m [96mservice -function[0m
2024-02-22 23:49:55,978 - INFO - [96mExecuting start_postgresql.sh script[0m
2024-02-22 23:49:55,988 - INFO - [92mPostgreSQL service started successfully.[0m
2024-02-22 23:49:55,988 - INFO - [96mCalling[0m[93m create_new_postgresql_user.py[0m [96mservice -function[0m
2024-02-22 23:49:55,988 - INFO - [94mAttempting to create a new database user with corresponding password:[0m
2024-02-22 23:49:55,988 - INFO - [96mUser:            [95mproject_google_reviews_usr[0m
2024-02-22 23:49:55,988 - INFO - [96mPassword:        [95mOo51knSSV3OSwfuy8WFu[0m
2024-02-22 23:49:59,363 - ERROR - [91mError occurred: Command 'sudo -u postgres psql -c "CREATE USER project_google_reviews_usr WITH PASSWORD 'Oo51knSSV3OSwfuy8WFu';"' returned non-zero exit status 1.[0m
2024-02-22 23:49:59,363 - INFO - [94mAttempting to confirm creation of a new database user:[0m
2024-02-22 23:49:59,363 - INFO - [96mUser:            [95mproject_google_reviews_usr[0m
2024-02-22 23:50:00,783 - ERROR - [91mError occurred: Command 'psql -U project_google_reviews_usr -W' returned non-zero exit status 2.[0m
2024-02-22 23:50:00,783 - INFO - [92mThe error should indicate: 'peer auth failed' because we haven't yet added an entry to the 'pg_hba.conf' file for the user database and the md5 authentication method.[0m
2024-02-22 23:50:00,783 - INFO - [96mCalling[0m[93m create_database_and_confirm_creation.py[0m [96mservice -function[0m
2024-02-22 23:50:00,791 - INFO - [96mAttempting to connect to the following database:[0m
2024-02-22 23:50:00,791 - INFO - [94mdatabase:[0m[95m        'postgres'       [0m
2024-02-22 23:50:00,791 - INFO - [94muser:[0m[95m            'postgres'         [0m
2024-02-22 23:50:00,791 - INFO - [94mpassword:[0m[95m        'postgres'         [0m
2024-02-22 23:50:00,791 - INFO - [94mhost:[0m[95m            'localhost'         [0m
2024-02-22 23:50:00,791 - INFO - [94mport:[0m[95m            '5432'        [0m
2024-02-22 23:50:00,791 - INFO - [92mSuccessfully connected to the database.[0m
2024-02-22 23:50:00,791 - INFO - [96mAttempting to create database:[0m
2024-02-22 23:50:00,791 - INFO - [92mDatabase:[0m[95m      'project_google_reviews'[0m
2024-02-22 23:50:00,791 - ERROR - [91mAn error occurred: database "project_google_reviews" already exists
[0m
2024-02-22 23:50:00,792 - INFO - [96mAttempting to confirm creation of database:[0m
2024-02-22 23:50:00,792 - INFO - [92mDatabase:[0m[95m      'project_google_reviews'[0m
2024-02-22 23:50:00,792 - INFO - [92mDatabase:[95m     'project_google_reviews'[0m [92m created successfully.[0m
2024-02-22 23:50:00,793 - INFO - [96mCalling[0m[93m stop_postgresql.py[0m [96mservice -function[0m
2024-02-22 23:50:00,793 - INFO - [96mExecuting stop_postgresql.sh script[0m
2024-02-22 23:50:00,820 - INFO - [92mPostgreSQL service stopped successfully.[0m
2024-02-22 23:50:00,820 - INFO - [96mCalling[0m[93m check_status_postgresql_service.py[0m [96mservice -function[0m
2024-02-22 23:50:00,820 - INFO - [96mExecuting check_status_postgresql_service.sh script[0m
2024-02-22 23:50:00,835 - INFO - [92mStatus check on postgreSQL service completed successfully.[0m
2024-02-22 23:50:00,835 - INFO - [96mCalling[0m[93m edit_pg_hba_postgresql_config_file.py.py[0m [96mservice -function[0m
2024-02-22 23:50:00,836 - INFO - [94mAttempting to add new entry within 'pg_hba.conf' postgreSQL authentication file:[0m
2024-02-22 23:50:00,836 - INFO - [96mDatabase:            [95mproject_google_reviews[0m
2024-02-22 23:50:00,836 - INFO - [96mUser:                [95mproject_google_reviews_usr[0m
2024-02-22 23:50:00,836 - INFO - [94mAttempting to add following line:[0m
2024-02-22 23:50:00,836 - INFO - [96mDatabase:            [95mproject_google_reviews[0m
2024-02-22 23:50:00,836 - INFO - [95m# TYPE  DATABASE  USER     ADDRESS     METHOD[0m
2024-02-22 23:50:00,836 - INFO - [95mlocal   project_google_reviews   project_google_reviews_usr   tmd5[0m
2024-02-22 23:50:00,836 - INFO - [92mLine added successfully to pg_hba.conf.[0m
2024-02-22 23:50:00,836 - INFO - [96mCalling[0m[93m restart_postgresql.py[0m [96mservice -function[0m
2024-02-22 23:50:00,836 - INFO - [96mExecuting restart_postgresql.sh script[0m
2024-02-22 23:50:07,213 - INFO - [92mPostgreSQL service restarted successfully.[0m
2024-02-22 23:50:07,213 - INFO - [96mCalling[0m[93m check_status_postgresql_service.py[0m [96mservice -function[0m
2024-02-22 23:50:07,213 - INFO - [96mExecuting check_status_postgresql_service.sh script[0m
2024-02-22 23:50:07,229 - INFO - [92mStatus check on postgreSQL service completed successfully.[0m
2024-02-22 23:50:07,229 - INFO - [96mCalling[0m[93m create_schema_new_database.py[0m [96mservice -function[0m
2024-02-22 23:50:07,230 - INFO - [94mAttempting to create specified schema for database:[0m
2024-02-22 23:50:07,230 - INFO - [96mDatabase:            [95mproject_google_reviews[0m
2024-02-22 23:50:07,277 - INFO - [94mOutput of creating schema for database [0m [95mproject_google_reviews:[0m
2024-02-22 23:50:07,277 - INFO - -- Create the project_google_horeca_reviews database
CREATE DATABASE project_google_reviews;
-- Connect to the project_google_horeca_reviews database
\c project_google_reviews;
You are now connected to database "project_google_reviews" as user "postgres".
-- Create the horca_parameters_client schema
CREATE SCHEMA IF NOT EXISTS horca_parameters_client;
CREATE SCHEMA
-- Create the horca_parameters_client.client_data table
CREATE TABLE IF NOT EXISTS horca_parameters_client.client_data (
    client_id SERIAL PRIMARY KEY,
    client_name TEXT NOT NULL,
    client_data JSONB NOT NULL,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);
CREATE TABLE
-- Create the google_account_info schema
CREATE SCHEMA IF NOT EXISTS google_account_info;
CREATE SCHEMA
-- Create the google_account_info.account_data table
CREATE TABLE IF NOT EXISTS google_account_info.account_data (
    account_id SERIAL PRIMARY KEY,
    account_data JSONB NOT NULL,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);
CREATE TABLE
-- Create the standard_strings_review schema
CREATE SCHEMA IF NOT EXISTS standard_strings_review;
CREATE SCHEMA
-- Create the standard_strings_review.standard_string table
CREATE TABLE IF NOT EXISTS standard_strings_review.standard_string (
    string_id SERIAL PRIMARY KEY,
    string_data JSONB NOT NULL,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);
CREATE TABLE
-- Create the created_horeca_reviews schema
CREATE SCHEMA IF NOT EXISTS created_horeca_reviews;
CREATE SCHEMA
-- Create the created_horeca_reviews.reviews_data table
CREATE TABLE IF NOT EXISTS created_horeca_reviews.reviews_data (
    review_id SERIAL PRIMARY KEY,
    client_name TEXT NOT NULL,
    review_data JSONB NOT NULL,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    review_count INTEGER
);
CREATE TABLE
GRANT ALL PRIVILEGES ON ALL TABLES IN SCHEMA horca_parameters_client TO project_google_reviews_usr;
GRANT
GRANT ALL PRIVILEGES ON ALL TABLES IN SCHEMA google_account_info TO project_google_reviews_usr;
GRANT
GRANT ALL PRIVILEGES ON ALL TABLES IN SCHEMA standard_strings_review TO project_google_reviews_usr;
GRANT
GRANT ALL PRIVILEGES ON ALL TABLES IN SCHEMA created_horeca_reviews TO project_google_reviews_usr;
GRANT

2024-02-22 23:50:07,277 - INFO - [92mSchema for database: [0m[95mproject_google_reviews[0m[92m created successfully.[0m
2024-02-22 23:50:07,277 - INFO - [94mVerifying schema creation...[0m
2024-02-22 23:50:07,312 - INFO - [92mSchema:      [0m[95mhorca_parameters_client[0m[92m verified to be created successfully.[0m
2024-02-22 23:50:07,346 - INFO - [92mSchema:      [0m[95mgoogle_account_info[0m[92m verified to be created successfully.[0m
2024-02-22 23:50:07,381 - INFO - [92mSchema:      [0m[95mstandard_strings_review[0m[92m verified to be created successfully.[0m
2024-02-22 23:50:07,414 - INFO - [92mSchema:      [0m[95mcreated_horeca_reviews[0m[92m verified to be created successfully.[0m
2024-02-22 23:50:07,414 - INFO - [92mAll schemas created successfully! Logging layout of created schemas...[0m
2024-02-22 23:50:07,418 - INFO - [94mLayout of created schemas::[0m
2024-02-22 23:50:07,418 - INFO - [93m
# project_google_horeca_reviews                                                            (NAME DATABASE)
# │
# ├── horca_parameters_client                                                              (NAME SCHEMA)
# │   └── client_data
# │       ├── client_name (TXT)                                                                      (NAME TABLE)
# │       ├── client_id (SERIAL)                                                           (NAME ID)
# │       ├── client_data (JSONB)                                                          (NAME DATA)
# │       └── created_at (TIMESTAMP)                                                       (NAME TIME-CREATED)
# │
# ├── google_account_info
# │   └── account_data
# │       ├── account_id (SERIAL)
# │       ├── account_data (JSONB)
# │       └── created_at (TIMESTAMP)
# │
# ├── standard_strings_review
# │   └── standard_string
# │       ├── string_id (SERIAL)
# │       ├── string_data (JSONB)
# │       └── created_at (TIMESTAMP)
# │
# │
# │
# └── created_horeca_reviews
#     └── reviews_data
#         ├── client_name (TXT)
#         ├── review_id (SERIAL)
#         ├── review_data (JSONB)
#         └── created_at (TIMESTAMP)
#         └── review_count (INTEGER)
[0m
